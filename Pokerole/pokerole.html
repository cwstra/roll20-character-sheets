<!--Miracle Formula:
ceil({n units}/2)
unit:
{2, floor(3**([[1d6]]/2-1)-1)}kl1
-->

<!--
TODO:
Make Roll Template
Make Rolls
-->

<input type="radio" name="attr_tab" class="sheet-trainertab" value="1" title="Trainer" checked="checked" />
<input type="radio" name="attr_tab" class="sheet-pokemontab" value="2" title="Pokémon" />

<div class="sheet-tab-br"></div>

<div class="sheet-page-wrap">
<div class="sheet-tabs">

<div class="sheet-tab">
    <input type="radio" id="tab-1" value = "1" name="attr_tab-group" checked>
    <label for="tab-1">Basic&nbsp;Info</label>
    <div class="sheet-content">
        <h3 class='sheet-header sheet-trainertab'>Pokérole: Trainer Info</h3>
        <h3 class='sheet-header sheet-pokemontab'>Pokérole: Pokémon Info</h3>
        <table class='sheet-table sheet-trainertab'>
            <tr>
                <td style='width: 20%;' class='sheet-table-header'>
                    Trainer Name:
                </td>
                <td style='width: 70%;'>
                    <input title="trainer_name" class="sheet-shortfield" name="attr_trainer_name" type="text" />
                </td>
                <td style='width: 5%;' class='sheet-table-header'>
                    Age:
                </td>
                <td style='width: 5%;'>
                    <input title="trainer_name" class="sheet-shortfield" name="attr_age" type="number"/>
                </td>
            </tr>
            <tr>
                <td class='sheet-table-header'>
                    Concept:
                </td>
                <td>
                    <input title="concept" class="sheet-shortfield" name="attr_concept" type="text"/>
                </td>
                <td class='sheet-table-header'>
                    Badges:
                </td>
                <td>
                    <input title="trainer_name" class="sheet-shortfield" name="attr_age" type="number" value='0' min='0'/>
                </td>
            </tr>
        </table>
        <table class='sheet-table sheet-pokemontab'>
            <tr>
                <td style='width: 20%;' class='sheet-table-header'>
                    Nickname:
                </td>
                <td style='width: 70%;'>
                    <input title="pokemon_name" class="sheet-shortfield" name="attr_pokemon_name" type="text" />
                </td>
                <td style='width: 5%;' class='sheet-table-header'>
                    Happiness:
                </td>
                <td style='width: 5%;'>
                    <input title="pokemon_happiness" class="sheet-shortfield" name="attr_pokemon_happiness" type="number" min='0' max='5'/>
                </td>
            </tr>
            <tr>
                <td class='sheet-table-header'>
                    Species:
                </td>
                <td>
                    <input title="species" class="sheet-shortfield" name="attr_species" type="text"/>
                </td>
                <td class='sheet-table-header'>
                    Loyalty:
                </td>
                <td>
                    <input title="pokemon_loyalty" class="sheet-shortfield" name="attr_pokemon_loyalty" type="number" min='0' max='5'/>
                </td>
            </tr>
        </table>
        <table class='sheet-table'>
            <tr class='sheet-8col'>
                <td class='sheet-table-header'>
                    HP:
                </td>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="HP" class="sheet-shortfield" name="attr_HP" type="number"/>/<input title="HP" class="sheet-shortfield" name="attr_HP_max" type="number"/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="pokemon_HP" class="sheet-shortfield" name="attr_pokemon_HP" type="number"/>/<input title="pokemon_HP" class="sheet-shortfield" name="attr_pokemon_HP_max" type="number"/>
                    </div>
                </td>
                <td class='sheet-table-header'>
                    Will:
                </td>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="Will" class="sheet-shortfield" name="attr_Will" type="number"/>/<input title="Will" class="sheet-shortfield" name="attr_Will_max" type="number"/><input class="sheet-dummy" name="attr_Will_max_equation" type="text" value="{2, floor(3**([[1d6]]/2-1)-1)}kl1,{2, floor(3**([[1d6]]/2-1)-1)}kl1,{2, floor(3**([[1d6]]/2-1)-1)}kl1"/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="pokemon_Will" class="sheet-shortfield" name="attr_pokemon_Will" type="number"/>/<input title="pokemon_Will" class="sheet-shortfield" name="attr_pokemon_Will_max" type="number"/><input class="sheet-dummy" name="attr_pokemon_Will_max_equation" type="text" value="{2, floor(3**([[1d6]]/2-1)-1)}kl1,{2, floor(3**([[1d6]]/2-1)-1)}kl1,{2, floor(3**([[1d6]]/2-1)-1)}kl1"/>
                    </div>
                </td>
                <td class='sheet-table-header'>
                    <div class='sheet-trainertab'>
                        Money:
                    </div>
                    <div class='sheet-pokemontab'>
                        Level:
                    </div>
                </td>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="money" class="sheet-shortfield" name="attr_money" type="number"/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="level" class="sheet-shortfield" name="attr_level" type="number"/>
                    </div>
                </td>
                <td class='sheet-table-header'>
                    EXP:
                </td>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="EXP" class="sheet-shortfield" name="attr_EXP" type="number"/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="pokemon_EXP" class="sheet-shortfield" name="attr_pokemon_EXP" type="number"/>
                    </div>
                </td>
            </tr>
            <tr class='sheet-8col sheet-pokemontab'>
                <td class='sheet-table-header'>
                    Size:
                </td>
                <td>
                    <input title="pokemon_size" class="sheet-shortfield" name="attr_pokemon_size" type="text"/>
                </td>
                <td class='sheet-table-header'>
                    Weight:
                </td>
                <td>
                    <input title="pokemon_weight" class="sheet-shortfield" name="attr_pokemon_weight" type="text"/>
                </td>
                <td class='sheet-table-header'>
                    Held Item:
                </td>
                <td>
                    <input title="pokemon_held_item" class="sheet-shortfield" name="attr_pokemon_held_item" type="text"/>
                </td>
                <td class='sheet-table-header'>
                    Disobedience
                </td>
                <td>
                    <input title="pokemon_disobedience" class="sheet-shortfield" name="attr_pokemon_disobedience" type="number" min='0' max='5'/>
                </td>
            </tr>
        </table>
        <h4 class='sheet-minihead sheet-trainertab'>Current Party Pokémon</h4>
        <table class='sheet-odd-table sheet-trainertab'>
            <tr class='sheet-2col'>
                <td>
                    <input title="party_pokemon_1" class="sheet-shortfield" name="attr_party_pokemon_1" type="text" placeholder='Pokémon 1' />
                </td>
                <td class='sheet-right-align'>
                    <input title="party_pokemon_2" class="sheet-shortfield" name="attr_party_pokemon_2" type="text" placeholder='Pokémon 2'/>
                </td>
            </tr>
            <tr class='sheet-2col'>
                <td>
                    <input title="party_pokemon_3" class="sheet-shortfield" name="attr_party_pokemon_3" type="text" placeholder='Pokémon 3'/>
                </td>
                <td class='sheet-right-align'>
                    <input title="party_pokemon_4" class="sheet-shortfield" name="attr_party_pokemon_4" type="text" placeholder='Pokémon 4'/>
                </td>
            </tr>
            <tr class='sheet-2col'>
                <td>
                    <input title="party_pokemon_5" class="sheet-shortfield" name="attr_party_pokemon_5" type="text" placeholder='Pokémon 5'/>
                </td>
                <td class='sheet-right-align'>
                    <input title="party_pokemon_6" class="sheet-shortfield" name="attr_party_pokemon_6" type="text" placeholder='Pokémon 6'/>
                </td>
            </tr>
        </table>
        <h4 class='sheet-minihead'>Nature</h4>
        <table class='sheet-table'>
            <tr>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="nature_name" class="sheet-fullfield" name="attr_nature" type="text" placeholder='Nature Name'/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="pokemon_nature_name" class="sheet-fullfield" name="attr_pokemon_nature" type="text" placeholder='Nature Name'/>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class='sheet-trainertab'>
                        <input title="nature_keywords" class="sheet-fullfield" name="attr_nature" type="text" placeholder='Nature Keywords'/>
                    </div>
                    <div class='sheet-pokemontab'>
                        <input title="pokemon_nature_keywords" class="sheet-fullfield" name="attr_pokemon_nature" type="text" placeholder='Nature Keywords'/>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan=2>
                    <div class='sheet-trainertab'>
                        <textarea title="nature_desc" class='sheet-boxsizingBorder' name="attr_nature_desc" rows="10"></textarea>
                    </div>
                    <div class='sheet-pokemontab'>
                        <textarea title="pokemon_nature_desc" class='sheet-boxsizingBorder' name="attr_pokemon_nature_desc" rows="10"></textarea>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="sheet-tab">
    <input type="radio" id="tab-2" value = "2" name="attr_tab-group">
    <label for="tab-2">Battle</label>
    <div class="sheet-content">
        <h3 class='sheet-header'>Basic Info</h3> 
        <div class='sheet-trainertab'>
            <h4 class='sheet-minihead'>Battle Stats</h4>
            <table class='sheet-odd-table'>
                <tr>
                    <td>
                        HP:
                    </td>
                    <td>
                        <input title="HP" class="sheet-shortfield" name="attr_HP" type="number"/>/<input title="HP" class="sheet-shortfield" name="attr_HP_max" type="number"/>
                    </td>
                    <td>
                        Will:
                    </td>
                    <td>
                        <input title="Will" class="sheet-shortfield" name="attr_Will" type="number"/>/<input title="Will" class="sheet-shortfield" name="attr_Will_max" type="number"/>
                    </td>
                </tr>
            </table>
            <table class='sheet-table sheet-dummy'>
                <tr>
                    <th rowspan=2>Stat</th>
                    <th colspan=3>Base Stats (Hover for Attr)</th>
                    <th rowspan=2>Bonus</th>
                    <th rowspan=2>Total</th>
                </tr>
                <tr style='background-color: #E5E5E5;'>
                    <th>Base Stat 1</th>
                    <th>Base Stat 2</th>
                    <th>Base Stat 3</th>
                </tr>
                <tr class='sheet-dummy'>
                    <td colspan=5>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Strength</td>
                    <td align="center"><input title='Strength' class='sheet-shortfield2' type="number" name="attr_Strength" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='Strength_Mod' class='sheet-shortfield2' type="number" name="attr_Strength_Mod" value='0'/></td>
                    <td align='center'>=<input title='Battle_Strength' class='sheet-shortfield2' type="number" name="attr_Battle_Strength" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_Battle_Strength_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Dexterity</td>
                    <td align="center"><input title='Dexterity' class='sheet-shortfield2' type="number" name="attr_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='Dexterity_Mod' class='sheet-shortfield2' type="number" name="attr_Dexterity_Mod" value='0'/></td>
                    <td align='center'><input title='Battle_Dexterity' class='sheet-shortfield2' type="number" name="attr_Battle_Dexterity" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_Battle_Dexterity_equation" value='2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Defense</td>
                    <td align="center"><input title='Vitality' class='sheet-shortfield2' type="number" name="attr_Vitality" value='1'  min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='Def_Bonus' class='sheet-shortfield2' type="number" name="attr_Def_Bonus" value='0'/></td>
                    <td align='center'>=<input title='Def' type="number" name="attr_Def" class=sheet-shortfield2 value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_Def_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Sp. Defense</td>
                    <td align="center"><input title='Vitality' class='sheet-shortfield2' type="number" name="attr_Vitality" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='SpDef_Bonus' class='sheet-shortfield2' type="number" name="attr_SpDef_Bonus" value='0'/></td>
                    <td align='center'>=<input title='SpDef' type="number" name="attr_SpDef" class=sheet-shortfield2 value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_Def_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Accuracy Bonus</td>
                    <td align="center">&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='Accuracy' class='sheet-shortfield2' type="number" name="attr_Accuracy" value='0'/></td>
                    <td align='center'>&nbsp;</td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Initiative</td>
                    <td align="center"><input title='Dexterity' class='sheet-shortfield2' type="number" name="attr_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'><input title='Survival' class='sheet-shortfield2' type="number" name="attr_Survival" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='Alert' class='sheet-shortfield2' type="number" name="attr_Alert" value='0' min='1' max='5'/></td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>=<input title='Initiative' class='sheet-shortfield2' type="number" name="attr_Initiative" value='1'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Evasion</td>
                    <td align="center"><input title='Dexterity' class='sheet-shortfield2' type="number" name="attr_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'><input title='Fight' class='sheet-shortfield2' type="number" name="attr_Fight" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='Evasion' class='sheet-shortfield2' type="number" name="attr_Evasion" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='Evasion_Bonus' class='sheet-shortfield2' type="number" name="attr_Evasion_Bonus" value='0'/></td>
                    <td align='center'>=<input title='Battle_Evasion' class='sheet-shortfield2' type="number" name="attr_Battle_Evasion" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_Battle_Evasion_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Status Ailments</h4>
            <table class='sheet-table sheet-status-table'>
                <tr>
                    <td class='sheet-table-header'>Burn 1:</td>
                    <td><input title='st_burn1' type='checkbox' value=1 name='attr_st_burn1'/></td>
                    <td class='sheet-table-header'>Burn 2:</td>
                    <td><input title='st_burn2' type='checkbox' value=1 name='attr_st_burn2'/></td>
                    <td class='sheet-table-header'>Burn 3:</td>
                    <td><input title='st_burn3' type='checkbox' value=1 name='attr_st_burn3'/></td>
                    <td class='sheet-table-header'>Frozen:</td>
                    <td><input type='checkbox' name='attr_st_froz'/></td>
                    <td class='sheet-table-header'>Paralysis:</td>
                    <td><input title='st_para' type='checkbox' value=1 name='attr_st_para'/></td>
                    <td class='sheet-table-header'>Poisoned:</td>
                    <td><input title='st_pois' type='checkbox' value=1 name='attr_st_pois'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Badly Poisoned:</td>
                    <td><input title='st_bad_pois' type='checkbox' value=1 name='attr_st_bad_pois'/></td>
                    <td class='sheet-table-header'>Sleep:</td>
                    <td><input title='st_sleep' type='checkbox' value=1 name='attr_st_sleep'/></td>
                    <td class='sheet-table-header'>Confused:</td>
                    <td><input title='st_conf' type='checkbox' value=1 name='attr_st_conf'/></td>
                    <td class='sheet-table-header'>Disabled:</td>
                    <td><input title='st_disa' type='checkbox' value=1 name='attr_st_disa'/></td>
                    <td class='sheet-table-header'>Flinch:</td>
                    <td><input title='st_flin' type='checkbox' value=1 name='attr_st_flin'/></td>
                    <td class='sheet-table-header'>In Love:</td>
                    <td><input title='st_love' type='checkbox' value=1 name='attr_st_love'/></td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Maneuvers</h4>
            <table class='sheet-table sheet-movelist'>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Strike:
                    <input class='sheet-dummy' type="text" name="attr_Strike_equation" value='@{Battle_Dexterity_equation}+@{Fight_equation}+@{Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Knockdown:
                    <input class='sheet-dummy' type="text" name="attr_Knockdown_equation" value='@{Battle_Strength_equation}+@{Fight_equation}+@{Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Grapple:
                    <input class='sheet-dummy' type="text" name="attr_Grapple_equation" value='@{Battle_Strength_equation}+@{Fight_equation}+@{Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Ambush:
                    <input class='sheet-dummy' type="text" name="attr_Ambush_equation" value='@{Battle_Dexterity_equation}+@{Survival_equation}+@{Stealth_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Cover an Ally:</td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Stabilize an Ally:
                    <input class='sheet-dummy' type="text" name="attr_Stabilize_equation" value='@{Battle_Dexterity_equation}+@{Knowledge_equation}+@{Medicine_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
            </table>
        </div>
        <div class='sheet-pokemontab'>
            <h4 class='sheet-minihead'>Battle Stats</h4>
            <table class='sheet-odd-table'>
                <tr>
                    <td>
                        HP:
                    </td>
                    <td>
                        <input title="pokemon_HP" class="sheet-shortfield" name="attr_pokemon_HP" type="number"/>/<input title="pokemon_HP" class="sheet-shortfield" name="attr_pokemon_HP_max" type="number"/>
                    </td>
                    <td>
                        Will:
                    </td>
                    <td>
                        <input title="pokemon_Will" class="sheet-shortfield" name="attr_pokemon_Will" type="number"/>/<input title="pokemon_Will" class="sheet-shortfield" name="attr_pokemon_Will_max" type="number"/>
                    </td>
                </tr>
            </table>
            <table class='sheet-table'>
                <tr>
                    <th rowspan=2>Stat</th>
                    <th colspan=3>Base Stats (Hover for Attr)</th>
                    <th rowspan=2>Bonus</th>
                    <th rowspan=2>Total</th>
                </tr>
                <tr style='background-color: #E5E5E5;'>
                    <th>Base Stat 1</th>
                    <th>Base Stat 2</th>
                    <th>Base Stat 3</th>
                </tr>
                <tr class='sheet-dummy'>
                    <td colspan=5>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Strength</td>
                    <td align="center"><input title='pokemon_Strength' class='sheet-shortfield2' type="number" name="attr_pokemon_Strength" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='pokemon_Strength_Mod' class='sheet-shortfield2' type="number" name="attr_pokemon_Strength_Mod" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Strength_Mod_equation" value='0'/></td>
                    <td align='center'>=<input title='pokemon_Battle_Strength' class='sheet-shortfield2' type="number" name="attr_pokemon_Battle_Strength" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Battle_Strength_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Dexterity</td>
                    <td align="center"><input title='pokemon_Dexterity' class='sheet-shortfield2' type="number" name="attr_pokemon_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='pokemon_Dexterity_Mod' class='sheet-shortfield2' type="number" name="attr_pokemon_Dexterity_Mod" value='0'/></td>
                    <td align='center'><input title='pokemon_Battle_Dexterity' class='sheet-shortfield2' type="number" name="attr_pokemon_Battle_Dexterity" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Battle_Dexterity_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Special</td>
                    <td align="center"><input title='pokemon_Special' class='sheet-shortfield2' type="number" name="attr_pokemon_Special" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='pokemon_Special_Mod' class='sheet-shortfield2' type="number" name="attr_pokemon_Special_Mod" value='0'/></td>
                    <td align='center'>=<input title='pokemon_Battle_Special' class='sheet-shortfield2' type="number" name="attr_pokemon_Battle_Special" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Battle_Special_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Defense</td>
                    <td align="center"><input title='pokemon_Vitality' class='sheet-shortfield2' type="number" name="attr_pokemon_Vitality" value='1'  min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='pokemon_Def_Bonus' class='sheet-shortfield2' type="number" name="attr_pokemon_Def_Bonus" value='0'/></td>
                    <td align='center'>=<input title='Def' type="number" name="attr_Def" class=sheet-shortfield2 value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Def_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Sp. Defense</td>
                    <td align="center"><input title='pokemon_Vitality' class='sheet-shortfield2' type="number" name="attr_pokemon_Vitality" value='1' min='1' max='10'/>+</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='SpDef_Bonus' class='sheet-shortfield2' type="number" name="attr_SpDef_Bonus" value='0'/></td>
                    <td align='center'>=<input title='SpDef' type="number" name="attr_SpDef" class=sheet-shortfield2 value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_SpDef_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Accuracy Bonus</td>
                    <td align="center">&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><input title='pokemon_Accuracy' class='sheet-shortfield2' type="number" name="attr_pokemon_Accuracy" value='0'/></td>
                    <td align='center'>&nbsp;</td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Initiative</td>
                    <td align="center"><input title='pokemon_Dexterity' class='sheet-shortfield2' type="number" name="attr_pokemon_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'><input title='pokemon_Survival' class='sheet-shortfield2' type="number" name="attr_pokemon_Survival" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='pokemon_Alert' class='sheet-shortfield2' type="number" name="attr_pokemon_Alert" value='0' min='1' max='5'/></td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'>=<input title='pokemon_Initiative' class='sheet-shortfield2' type="number" name="attr_pokemon_Initiative" value='1'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Evasion</td>
                    <td align="center"><input title='pokemon_Dexterity' class='sheet-shortfield2' type="number" name="attr_pokemon_Dexterity" value='1' min='1' max='10'/>+</td>
                    <td align='center'><input title='pokemon_Fight' class='sheet-shortfield2' type="number" name="attr_pokemon_Fight" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='pokemon_Evasion' class='sheet-shortfield2' type="number" name="attr_pokemon_Evasion" value='0' min='1' max='5'/>+</td>
                    <td align='center'><input title='pokemon_Evasion_Bonus' class='sheet-shortfield2' type="number" name="attr_pokemon_Evasion_Bonus" value='0'/></td>
                    <td align='center'>=<input title='pokemon_Battle_Evasion' class='sheet-shortfield2' type="number" name="attr_pokemon_Battle_Evasion" value='1'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Battle_Evasion_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                    </td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Status Ailments</h4>
            <table class='sheet-table sheet-status-table'>
                <tr>
                    <td class='sheet-table-header'>Burn 1:</td>
                    <td><input title='pokemon_st_burn1' type='checkbox' value=1 name='attr_pokemon_st_burn1'/></td>
                    <td class='sheet-table-header'>Burn 2:</td>
                    <td><input title='pokemon_st_burn2' type='checkbox' value=1 name='attr_pokemon_st_burn2'/></td>
                    <td class='sheet-table-header'>Burn 3:</td>
                    <td><input title='pokemon_st_burn3' type='checkbox' value=1 name='attr_pokemon_st_burn3'/></td>
                    <td class='sheet-table-header'>Frozen:</td>
                    <td><input type='checkbox' name='attr_st_froz'/></td>
                    <td class='sheet-table-header'>Paralysis:</td>
                    <td><input title='pokemon_st_para' type='checkbox' value=1 name='attr_pokemon_st_para'/></td>
                    <td class='sheet-table-header'>Poisoned:</td>
                    <td><input title='pokemon_st_pois' type='checkbox' value=1 name='attr_pokemon_st_pois'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Badly Poisoned:</td>
                    <td><input title='pokemon_st_bad_pois' type='checkbox' value=1 name='attr_pokemon_st_bad_pois'/></td>
                    <td class='sheet-table-header'>Sleep:</td>
                    <td><input title='pokemon_st_sleep' type='checkbox' value=1 name='attr_pokemon_st_sleep'/></td>
                    <td class='sheet-table-header'>Confused:</td>
                    <td><input title='pokemon_st_conf' type='checkbox' value=1 name='attr_pokemon_st_conf'/></td>
                    <td class='sheet-table-header'>Disabled:</td>
                    <td><input title='pokemon_st_disa' type='checkbox' value=1 name='attr_pokemon_st_disa'/></td>
                    <td class='sheet-table-header'>Flinch:</td>
                    <td><input title='pokemon_st_flin' type='checkbox' value=1 name='attr_pokemon_st_flin'/></td>
                    <td class='sheet-table-header'>In Love:</td>
                    <td><input title='pokemon_st_love' type='checkbox' value=1 name='attr_pokemon_st_love'/></td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Manuevers</h4>
            <table class='sheet-table sheet-movelist'>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Strike:
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Strike_equation" value='@{pokemon_Battle_Dexterity_equation}+@{pokemon_Fight_equation}+@{pokemon_Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Knockdown:
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Knockdown_equation" value='@{pokemon_Battle_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Grapple:
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Grapple_equation" value='@{pokemon_Battle_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Brawl_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Ambush:
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Ambush_equation" value='@{pokemon_Battle_Dexterity_equation}+@{pokemon_Survival_equation}+@{pokemon_Stealth_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Cover an Ally:</td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Stabilize an Ally:
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Stabilize_equation" value='@{pokemon_Battle_Dexterity_equation}+@{pokemon_Knowledge_equation}+@{pokemon_Medicine_equation}'/>
                    </td>
                    <td colspan=1 class='sheet-table-header'>(Roll to be inserted)</td>
                </tr>
            </table>
            <h3 class='sheet-header'>Abilities</h3> 
            <fieldset class='repeating_miniabilities'>
                <h4 class='sheet-minihead'>Ability</h4>
                <table class='sheet-table'>
                    <tr>
                        <td colspan=1 class='sheet-table-header'>Name:</td>
                        <td colspan=9><input title='repeating_abilities_X_Ability_Name' class='sheet-shortfield' name='attr_miniAbility_Name' type='text'>
                        <input class='sheet-dummy' type='text' name='attr_miniAbility_Description'>
                        <input class='sheet-dummy' type='text' name='attr_miniAbility_Effect'>
                        </td>
                        <td colspan=1>Roll:</td>
                        <td colspan=1><button type='roll' title='repeating_abilities_X_Ability_Display' value='&{template:Pokerole-display} {{name=@{miniAbility_Name}}} {{desc=@{miniAbility_Description}}} {{effect=@{miniAbility_Effect}}}' name='roll_miniAbility_Display' /></td>
                    </tr>
                </table>
           </fieldset>
            <h3 class='sheet-header sheet-pokemontab'>Moves</h3> 
            <fieldset class='repeating_minimoves'>
                <h4 class='sheet-minihead'>Move</h4>
                <table class='sheet-table'>
                    <tr>
                        <td colspan=1 class='sheet-table-header'>Name:</td>
                        <td colspan=9><input title='repeating_moves_X_Move_Name' class='sheet-shortfield' name='attr_miniMove_Name' type='text'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Output'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Input'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Type'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Target'>
                        <input class='sheet-dummy' type='number' name='attr_miniMove_Damage_T'>
                        <input class='sheet-dummy' type='number' name='attr_miniMove_Crit'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Effects'>
                        <input class='sheet-dummy' type='number' name='attr_miniMove_Chance'>
                        <input class='sheet-dummy' type='number' name='attr_miniMove_Accuracy_Total'>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation_sub_2" value='0'/>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation_sub_4" value='0'/>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation_sub_6" value='0'/>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation_sub_8" value='0'/>
                        <input class='sheet-dummy' type="text" name="attr_miniMove_Accuracy_Total_equation_sub_10" value='0'/>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Desc'>
                        <input class='sheet-dummy' type='text' name='attr_miniMove_Shield'>
                        </td>
                        <td>Roll:</td>
                        <td><button type='roll' title='repeating_moves_X_Move_Roll' value='&{template:Pokerole-move} {{name=@{pokemon_name}}} {{move=@{miniMove_Name}}} {{move_output=[[@{miniMove_Output}]]}} {{move_input=[[@{miniMove_Input}]]}} {{type=@{miniMove_Type}}} {{target=@{miniMove_Target}}} {{accuracy=[[?{Accuracy Penalty|0,0|-2,2|-4,4|-6,6|-8,8|-10,10}]]}} {{accuracy_0=[[@{miniMove_Accuracy_Total_equation}]]}} {{accuracy_2=[[@{miniMove_Accuracy_Total_equation_sub_2}]]}} {{accuracy_4=[[@{miniMove_Accuracy_Total_equation_sub_4}]]}} {{accuracy_6=[[@{miniMove_Accuracy_Total_equation_sub_6}]]}} {{accuracy_8=[[@{miniMove_Accuracy_Total_equation_sub_8}]]}} {{accuracy_10=[[@{miniMove_Accuracy_Total_equation_sub_10}]]}} {{damage_t=[[@{miniMove_Damage_T}d6]]}} {{crit=[[@{miniMove_Crit}]]}} {{damage_b=[[2d6]]}} {{chance=@{miniMove_Chance}}} {{chance_roll=[[@{miniMove_Chance}d6>6]]}} {{effect=@{miniMove_Effects}}} {{desc=@{miniMove_Desc}}}' name='roll_miniMove_Roll' /> <img src="http://www.serebii.net/pokedex-dp/type/other.png"></td>
                    </tr>
                </table>
            </fieldset>
        </div>
    </div>
</div>
<div class="sheet-tab">
    <input type="radio" id="tab-3" value = "3" name="attr_tab-group">
    <label for="tab-3">Attributes/ Skills/ Specialities</label>
    <div class="sheet-content">
        <h3 class='sheet-minihead'>Generic Roll</h3>
        <table class='sheet-table sheet-trainertab'>
            <tr>
                <td>
                    <select title='Generic_Trainer_Roll1' class='sheet-shortfield9' name='attr_Generic_Trainer_Roll1'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Strength'>Strength</option> 
                        <option value='Dexterity'>Dexterity</option>
                        <option value='Vitality'>Vitality</option>
                        <option value='Insight'>Insight</option>
                        <option value='Tough'>Tough</option> 
                        <option value='Cool'>Cool</option>
                        <option value='Beauty'>Beauty</option>
                        <option value='Intelligence'>Intelligence</option>
                        <option value='Will'>Will</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Trainer_Test1" value='0'/>+
                    <select title='Generic_Trainer_Roll2' class='sheet-shortfield9' name='attr_Generic_Trainer_Roll2'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Fight'>Fight</option> 
                        <option value='Survival'>Survival</option>
                        <option value='Contest'>Contest</option>
                        <option value='Knowledge'>Knowledge</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Trainer_Test2" value='0'/>+
                    <select title='Generic_Trainer_Roll3' class='sheet-shortfield9' name='attr_Generic_Trainer_Roll3'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Brawl'>Brawl</option> 
                        <option value='Throw'>Throw</option>
                        <option value='Evasion'>Evasion</option>
                        <option value='Weapons'>Weapons</option>
                        <option value='Alert'>Alert</option> 
                        <option value='Athletic'>Athletic</option>
                        <option value='Nature'>Nature</option>
                        <option value='Stealth'>Stealth</option>
                        <option value='Empathy'>Empathy</option> 
                        <option value='Etiquette'>Etiquette</option>
                        <option value='Intimidate'>Intimidate</option>
                        <option value='Perform'>Perform</option>
                        <option value='Crafts'>Crafts</option> 
                        <option value='Lore'>Lore</option>
                        <option value='Medicine'>Medicine</option>
                        <option value='Science'>Science</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Trainer_Test3" value='0'/>+
                    <input title="Generic_Trainer_RollB" class="sheet-shortfield" name="attr_Generic_Trainer_RollB" type="number" value='0'/>
                    =<input title="Generic_Trainer_RollT" class="sheet-shortfield" name="attr_Generic_Trainer_RollT" type="number" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Generic_Trainer_RollT_equation" value='0'/>
                </td>
                <td colspan=1>Roll:</td>
                <td colspan=1>
                    <button type='roll' title='Generic_Trainer_Roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=@{Generic_Trainer_Roll1}}} {{test1=[[@{Generic_Trainer_Test1}]]}} {{name2=@{Generic_Trainer_Roll2}}} {{test2=[[@{Generic_Trainer_Test2}]]}} {{name3=@{Generic_Trainer_Roll3}}} {{test3=[[@{Generic_Trainer_Test3}]]}} {{dice=@{Generic_Trainer_RollT}}} {{result=[[@{Generic_Trainer_RollT_equation}]]}}' name='roll_Generic_Trainer_Roll' />
                </td>
            </tr> 
        </table>
        <table class='sheet-table sheet-pokemontab'>
            <tr>
                <td>
                    <select title='Generic_Pokemon_Roll1' class='sheet-shortfield9' name='attr_Generic_Pokemon_Roll1'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Strength'>Strength</option> 
                        <option value='Dexterity'>Dexterity</option>
                        <option value='Vitality'>Vitality</option>
                        <option value='Special'>Special</option>
                        <option value='Insight'>Insight</option>
                        <option value='Tough'>Tough</option> 
                        <option value='Cool'>Cool</option>
                        <option value='Beauty'>Beauty</option>
                        <option value='Cute'>Cute</option>
                        <option value='Smart'>Smart</option>
                        <option value='Will'>Will</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Pokemon_Test1" value='0'/>+
                    <select title='Generic_Pokemon_Roll2' class='sheet-shortfield9' name='attr_Generic_Pokemon_Roll2'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Fight'>Fight</option> 
                        <option value='Survival'>Survival</option>
                        <option value='Contest'>Contest</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Pokemon_Test2" value='0'/>+
                    <select title='Generic_Pokemon_Roll3' class='sheet-shortfield9' name='attr_Generic_Pokemon_Roll3'>
                        <option value='0' selected>Nothing</option> 
                        <option value='Brawl'>Brawl</option> 
                        <option value='Channel'>Channel</option>
                        <option value='Evasion'>Evasion</option>
                        <option value='Clash'>Clash</option>
                        <option value='Alert'>Alert</option> 
                        <option value='Athletic'>Athletic</option>
                        <option value='Nature'>Nature</option>
                        <option value='Stealth'>Stealth</option>
                        <option value='Allure'>Allure</option> 
                        <option value='Etiquette'>Etiquette</option>
                        <option value='Intimidate'>Intimidate</option>
                        <option value='Perform'>Perform</option>
                    </select><input class='sheet-dummy' type="number" name="attr_Generic_Pokemon_Test3" value='0'/>+
                    <input title="Generic_Pokemon_RollB" class="sheet-shortfield" name="attr_Generic_Pokemon_RollB" type="number" value='0'/>
                    =<input title="Generic_Pokemon_RollT" class="sheet-shortfield" name="attr_Generic_Pokemon_RollT" type="number" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Generic_Pokemon_RollT_equation" value='0'/>
                </td>
                <td colspan=1>Roll:</td>
                <td colspan=1>
                    <button type='roll' title='Generic_Pokemon_Roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=@{Generic_Pokemon_Roll1}}} {{test1=[[@{Generic_Pokemon_Test1}]]}} {{name2=@{Generic_Pokemon_Roll2}}} {{test2=[[@{Generic_Pokemon_Test2}]]}} {{name3=@{Generic_Pokemon_Roll3}}} {{test3=[[@{Generic_Pokemon_Test3}]]}} {{dice=@{Generic_Pokemon_RollT}}} {{result=[[@{Generic_Pokemon_RollT_equation}]]}}' name='roll_Generic_Pokemon_Roll' />
                </td>
            </tr> 
        </table>
        <h3 class='sheet-minihead'>Physical Attributes</h3>
        <table class='sheet-table sheet-trainertab'>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Strength:
                </td>
                <td class='sheet-tough'>
                    <input title="Strength" class="sheet-shortfield" name="attr_Strength" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Strength_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Strength}}} {{result=[[@{Strength_equation}]]}}' name='roll_StrengthCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Dexterity:
                </td>
                <td class='sheet-cool'>
                    <input title="Dexterity" class="sheet-shortfield" name="attr_Dexterity" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Dexterity_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Dexterity}}} {{result=[[@{Dexterity_equation}]]}}' name='roll_DexterityCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Vitality:
                </td>
                <td class='sheet-beauty'>
                    <input title="Vitality" class="sheet-shortfield" name="attr_Vitality" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Vitality_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Vitality}}} {{result=[[@{Vitality_equation}]]}}' name='roll_VitalityCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Insight:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Insight" class="sheet-shortfield" name="attr_Insight" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Insight_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Insight}}} {{result=[[@{Insight_equation}]]}}' name='roll_InsightCheck'>
                </td>
            </tr>
            <tr>
                <td colspan=12>
                    <h3 class='sheet-minihead'>Social Attributes</h3>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Tough:
                </td>
                <td class='sheet-tough'>
                    <input title="Tough" class="sheet-shortfield" name="attr_Tough" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Tough_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Tough}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Tough}}} {{result=[[@{Tough_equation}]]}}' name='roll_ToughCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Cool:
                </td>
                <td class='sheet-cool'>
                    <input title="Cool" class="sheet-shortfield" name="attr_Cool" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Cool_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Cool}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Cool}}} {{result=[[@{Cool_equation}]]}}' name='roll_CoolCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Beauty:
                </td>
                <td class='sheet-beauty'>
                    <input title="Beauty" class="sheet-shortfield" name="attr_Beauty" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Beauty_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Beauty}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Beauty}}} {{result=[[@{Beauty_equation}]]}}' name='roll_BeautyCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Intelligence:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Intelligence" class="sheet-shortfield" name="attr_Intelligence" type="number" value='1' min='1' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Intelligence_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Intelligence}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{Intelligence}}} {{result=[[@{Intelligence_equation}]]}}' name='roll_IntelligenceCheck'>
                </td>
            </tr>
            <tr>
                <td colspan=12>
                    <h3 class='sheet-minihead'>Skills</h3>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Fight:
                </td>
                <td class='sheet-tough'>
                    <input title="Fight" class="sheet-shortfield" name="attr_Fight" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Fight_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{name2=Fight}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{Strength}+@{Fight}]]}} {{result=[[@{Strength_equation}+@{Fight_equation}]]}}' name='roll_FightCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Survival:
                </td>
                <td class='sheet-cool'>
                    <input title="Survival" class="sheet-shortfield" name="attr_Survival" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Survival_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{name2=Survival}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{Dexterity}+@{Survival}]]}} {{result=[[@{Strength_equation}+@{Survival_equation}]]}}' name='roll_SurvivalCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Contest:
                </td>
                <td class='sheet-beauty'>
                    <input title="Contest" class="sheet-shortfield" name="attr_Contest" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Contest_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{name2=Contest}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{Vitality}+@{Contest}]]}} {{result=[[@{Vitality_equation}+@{Contest_equation}]]}}' name='roll_ContestCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Knowledge:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Knowledge" class="sheet-shortfield" name="attr_Knowledge" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Knowledge_equation" value='0'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{name2=Knowledge}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{Insight}+@{Knowledge}]]}} {{result=[[@{Insight_equation}+@{Knowledge_equation}]]}}' name='roll_KnowledgeCheck'>
                </td>
            </tr>
            <tr>
                <td colspan=12>
                    <h3 class='sheet-minihead'>Specialities</h3>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Brawl:
                </td>
                <td class='sheet-tough'>
                    <input title="Brawl" class="sheet-shortfield" name="attr_Brawl" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Brawl_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{name2=Fight}} {{test2=[[1]]}} {{name3=Brawl}} {{test3=[[1]]}} {{dice=[[@{Strength}+@{Fight}+@{Brawl}]]}} {{result=[[@{Strength_equation}+@{Fight_equation}+@{Brawl_equation}]]}}' name='roll_BrawlCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Alert:
                </td>
                <td class='sheet-cool'>
                    <input title="Alert" class="sheet-shortfield" name="attr_Alert" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Alert_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{name2=Survival}} {{test2=[[1]]}} {{name3=Alert}} {{test3=[[1]]}} {{dice=[[@{Dexterity}+@{Survival}+@{Alert}]]}} {{result=[[@{Dexterity_equation}+@{Survival_equation}+@{Alert_equation}]]}}' name='roll_AlertCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Empathy:
                </td>
                <td class='sheet-beauty'>
                    <input title="Empathy" class="sheet-shortfield" name="attr_Empathy" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Empathy_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{name2=Contest}} {{test2=[[1]]}} {{name3=Empathy}} {{test3=[[1]]}} {{dice=[[@{Vitality}+@{Contest}+@{Empathy}]]}} {{result=[[@{Vitality_equation}+@{Contest_equation}+@{Empathy_equation}]]}}' name='roll_EmpathyCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Crafts:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Crafts" class="sheet-shortfield" name="attr_Crafts" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Crafts_equation" value='0'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{name2=Knowledge}} {{test2=[[1]]}} {{name3=Crafts}} {{test3=[[1]]}} {{dice=[[@{Insight}+@{Knowledge}+@{Crafts}]]}} {{result=[[@{Insight_equation}+@{Knowledge_equation}+@{Crafts_equation}]]}}' name='roll_CraftsCheck'>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Throw:
                </td>
                <td class='sheet-tough'>
                    <input title="Throw" class="sheet-shortfield" name="attr_Throw" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Throw_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{name2=Fight}} {{test2=[[1]]}} {{name3=Throw}} {{test3=[[1]]}} {{dice=[[@{Strength}+@{Fight}+@{Throw}]]}} {{result=[[@{Strength_equation}+@{Fight_equation}+@{Throw_equation}]]}}' name='roll_ThrowCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Athletic:
                </td>
                <td class='sheet-cool'>
                    <input title="Athletic" class="sheet-shortfield" name="attr_Athletic" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Athletic_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{name2=Survival}} {{test2=[[1]]}} {{name3=Athletic}} {{test3=[[1]]}} {{dice=[[@{Dexterity}+@{Survival}+@{Athletic}]]}} {{result=[[@{Dexterity_equation}+@{Survival_equation}+@{Athletic_equation}]]}}' name='roll_AthleticCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Etiquette:
                </td>
                <td class='sheet-beauty'>
                    <input title="Etiquette" class="sheet-shortfield" name="attr_Etiquette" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Etiquette_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{name2=Contest}} {{test2=[[1]]}} {{name3=Etiquette}} {{test3=[[1]]}} {{dice=[[@{Vitality}+@{Contest}+@{Etiquette}]]}} {{result=[[@{Vitality_equation}+@{Contest_equation}+@{Etiquette_equation}]]}}' name='roll_EtiquetteCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Lore:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Lore" class="sheet-shortfield" name="attr_Lore" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Lore_equation" value='0'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{name2=Knowledge}} {{test2=[[1]]}} {{name3=Lore}} {{test3=[[1]]}} {{dice=[[@{Insight}+@{Knowledge}+@{Lore}]]}} {{result=[[@{Insight_equation}+@{Knowledge_equation}+@{Lore_equation}]]}}' name='roll_LoreCheck'>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Evasion:
                </td>
                <td class='sheet-tough'>
                    <input title="Evasion" class="sheet-shortfield" name="attr_Evasion" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Evasion_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{name2=Fight}} {{test2=[[1]]}} {{name3=Evasion}} {{test3=[[1]]}} {{dice=[[@{Strength}+@{Fight}+@{Evasion}]]}} {{result=[[@{Strength_equation}+@{Fight_equation}+@{Evasion_equation}]]}}' name='roll_EvasionCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Nature:
                </td>
                <td class='sheet-cool'>
                    <input title="Nature" class="sheet-shortfield" name="attr_Nature" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Nature_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{name2=Survival}} {{test2=[[1]]}} {{name3=Nature}} {{test3=[[1]]}} {{dice=[[@{Dexterity}+@{Survival}+@{Nature}]]}} {{result=[[@{Dexterity_equation}+@{Survival_equation}+@{Nature_equation}]]}}' name='roll_NatureCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Intimidate:
                </td>
                <td class='sheet-beauty'>
                    <input title="Intimidate" class="sheet-shortfield" name="attr_Intimidate" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Intimidate_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{name2=Contest}} {{test2=[[1]]}} {{name3=Intimidate}} {{test3=[[1]]}} {{dice=[[@{Vitality}+@{Contest}+@{Intimidate}]]}} {{result=[[@{Vitality_equation}+@{Contest_equation}+@{Intimidate_equation}]]}}' name='roll_IntimidateCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Medicine:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Medicine" class="sheet-shortfield" name="attr_Medicine" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Medicine_equation" value='0'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{name2=Knowledge}} {{test2=[[1]]}} {{name3=Medicine}} {{test3=[[1]]}} {{dice=[[@{Insight}+@{Knowledge}+@{Medicine}]]}} {{result=[[@{Insight_equation}+@{Knowledge_equation}+@{Medicine_equation}]]}}' name='roll_MedicineCheck'>
                </td>
            </tr>
            <tr class='sheet-12col'>
                <td class='sheet-table-header sheet-tough'>
                    Weapons:
                </td>
                <td class='sheet-tough'>
                    <input title="Weapons" class="sheet-shortfield" name="attr_Weapons" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Weapons_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Strength}} {{test1=[[1]]}} {{name2=Fight}} {{test2=[[1]]}} {{name3=Weapons}} {{test3=[[1]]}} {{dice=[[@{Strength}+@{Fight}+@{Weapons}]]}} {{result=[[@{Strength_equation}+@{Fight_equation}+@{Weapons_equation}]]}}' name='roll_WeaponsCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Stealth:
                </td>
                <td class='sheet-cool'>
                    <input title="Stealth" class="sheet-shortfield" name="attr_Stealth" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Stealth_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Dexterity}} {{test1=[[1]]}} {{name2=Survival}} {{test2=[[1]]}} {{name3=Stealth}} {{test3=[[1]]}} {{dice=[[@{Dexterity}+@{Survival}+@{Stealth}]]}} {{result=[[@{Dexterity_equation}+@{Survival_equation}+@{Stealth_equation}]]}}' name='roll_StealthCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Perform:
                </td>
                <td class='sheet-beauty'>
                    <input title="Perform" class="sheet-shortfield" name="attr_Perform" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Perform_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Vitality}} {{test1=[[1]]}} {{name2=Contest}} {{test2=[[1]]}} {{name3=Perform}} {{test3=[[1]]}} {{dice=[[@{Vitality}+@{Contest}+@{Perform}]]}} {{result=[[@{Vitality_equation}+@{Contest_equation}+@{Perform_equation}]]}}' name='roll_PerformCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Science:
                </td>
                <td class='sheet-intelligence'>
                    <input title="Science" class="sheet-shortfield" name="attr_Science" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_Science_equation" value='0'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{trainer_name}}} {{name1=Insight}} {{test1=[[1]]}} {{name2=Knowledge}} {{test2=[[1]]}} {{name3=Science}} {{test3=[[1]]}} {{dice=[[@{Insight}+@{Knowledge}+@{Science}]]}} {{result=[[@{Insight_equation}+@{Knowledge_equation}+@{Science_equation}]]}}' name='roll_ScienceCheck'>
                </td>
            </tr>
        </table>        
        <table class='sheet-table sheet-pokemontab'>
            <tr class='sheet-15col'>
                <td class='sheet-table-header sheet-tough'>
                    Strength:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Strength" class="sheet-shortfield" name="attr_pokemon_Strength" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Strength_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Strength}}} {{result=[[@{pokemon_Strength_equation}]]}}' name='roll_pokemon_StrengthCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Dexterity:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Dexterity" class="sheet-shortfield" name="attr_pokemon_Dexterity" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Dexterity_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Dexterity}}} {{result=[[@{pokemon_Dexterity_equation}]]}}' name='roll_pokemon_DexterityCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Vitality:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Vitality" class="sheet-shortfield" name="attr_pokemon_Vitality" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Vitality_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Vitality}}} {{result=[[@{pokemon_Vitality_equation}]]}}' name='roll_pokemon_VitalityCheck'>
                </td>
                <td class='sheet-table-header sheet-cute'>
                    Special:
                </td>
                <td class='sheet-cute'>
                    <input title="pokemon_Special" class="sheet-shortfield" name="attr_pokemon_Special" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Special_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cute sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Special}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Special}}} {{result=[[@{pokemon_Special_equation}]]}}' name='roll_pokemon_SpecialCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Insight:
                </td>
                <td class='sheet-intelligence'>
                    <input title="pokemon_Insight" class="sheet-shortfield" name="attr_pokemon_Insight" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Insight_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Insight}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Insight}}} {{result=[[@{pokemon_Insight_equation}]]}}' name='roll_pokemon_InsightCheck'>
                </td>
            </tr>
            <tr>
                <td colspan=15>
                    <h3 class='sheet-minihead'>Social Attributes</h3>
                </td>
            </tr>
            <tr class='sheet-15col'>
                <td class='sheet-table-header sheet-tough'>
                    Tough:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Tough" class="sheet-shortfield" name="attr_pokemon_Tough" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Tough_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Tough}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Tough}}} {{result=[[@{pokemon_Tough_equation}]]}}' name='roll_pokemon_ToughCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Cool:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Cool" class="sheet-shortfield" name="attr_pokemon_Cool" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Cool_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Cool}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Cool}}} {{result=[[@{pokemon_Cool_equation}]]}}' name='roll_pokemon_CoolCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Beauty:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Beauty" class="sheet-shortfield" name="attr_pokemon_Beauty" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Beauty_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Beauty}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Beauty}}} {{result=[[@{pokemon_Beauty_equation}]]}}' name='roll_pokemon_BeautyCheck'>
                </td>
                <td class='sheet-table-header sheet-cute'>
                    Cute:
                </td>
                <td class='sheet-cute'>
                    <input title="pokemon_Cute" class="sheet-shortfield" name="attr_pokemon_Cute" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Cute_equation" value='{2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-cute sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Cute}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Cute}}} {{result=[[@{pokemon_Cute_equation}]]}}' name='roll_pokemon_CuteCheck'>
                </td>
                <td class='sheet-table-header sheet-intelligence'>
                    Smart:
                </td>
                <td class='sheet-intelligence'>
                    <input title="pokemon_Smart" class="sheet-shortfield" name="attr_pokemon_Smart" type="number" value='1' min='1' max='10'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Smart_equation" value='2, floor(3**([[1d6]]/2-1)-1)}kl1}'/>
                </td>
                <td class='sheet-intelligence sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Smart}} {{test1=[[1]]}} {{test2=[[0]]}} {{test3=[[0]]}} {{dice=@{pokemon_Smart}}} {{result=[[@{pokemon_Smart_equation}]]}}' name='roll_pokemon_SmartCheck'>
                </td>
            </tr>
        </table>
        <h3 class='sheet-minihead sheet-pokemontab'>Skills</h3>
        <table class='sheet-table sheet-pokemontab'>
            <tr class='sheet-9col'>
                <td class='sheet-table-header sheet-tough'>
                    Fight:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Fight" class="sheet-shortfield" name="attr_pokemon_Fight" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Fight_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{name2=pokemon_Fight}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{pokemon_Strength}+@{pokemon_Fight}]]}} {{result=[[@{pokemon_Strength_equation}+@{pokemon_Fight_equation}]]}}' name='roll_pokemon_FightCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Survival:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Survival" class="sheet-shortfield" name="attr_pokemon_Survival" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Survival_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{name2=pokemon_Survival}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{pokemon_Dexterity}+@{pokemon_Survival}]]}} {{result=[[@{pokemon_Dexterity_equation}+@{pokemon_Survival_equation}]]}}' name='roll_pokemon_SurvivalCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Contest:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Contest" class="sheet-shortfield" name="attr_pokemon_Contest" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Contest_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{name2=pokemon_Contest}} {{test2=[[1]]}} {{test3=[[0]]}} {{dice=[[@{pokemon_Vitality}+@{pokemon_Contest}]]}} {{result=[[@{pokemon_Vitality_equation}+@{pokemon_Contest_equation}]]}}' name='roll_pokemon_ContestCheck'>
                </td>
            </tr>
            <tr>
                <td colspan=9>
                    <h3 class='sheet-minihead'>Specialities</h3>
                </td>
            </tr>
            <tr class='sheet-9col'>
                <td class='sheet-table-header sheet-tough'>
                    Brawl:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Brawl" class="sheet-shortfield" name="attr_pokemon_Brawl" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Brawl_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{name2=pokemon_Fight}} {{test2=[[1]]}} {{name3=pokemon_Brawl}} {{test3=[[1]]}} {{dice=[[@{pokemon_Strength}+@{pokemon_Fight}+@{pokemon_Brawl}]]}} {{result=[[@{pokemon_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Brawl_equation}]]}}' name='roll_pokemon_BrawlCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Alert:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Alert" class="sheet-shortfield" name="attr_pokemon_Alert" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Alert_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{name2=pokemon_Survival}} {{test2=[[1]]}} {{name3=pokemon_Alert}} {{test3=[[1]]}} {{dice=[[@{pokemon_Dexterity}+@{pokemon_Survival}+@{pokemon_Alert}]]}} {{result=[[@{pokemon_Dexterity_equation}+@{pokemon_Survival_equation}+@{pokemon_Alert_equation}]]}}' name='roll_pokemon_AlertCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Allure:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Allure" class="sheet-shortfield" name="attr_pokemon_Allure" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Allure_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{name2=pokemon_Contest}} {{test2=[[1]]}} {{name3=pokemon_Allure}} {{test3=[[1]]}} {{dice=[[@{pokemon_Vitality}+@{pokemon_Contest}+@{pokemon_Allure}]}} {{result=[[@{pokemon_Vitality_equation}+@{pokemon_Contest_equation}+@{pokemon_Allure_equation}]]}}' name='roll_pokemon_AllureCheck'>
                </td>
            </tr>
            <tr class='sheet-9col'>
                <td class='sheet-table-header sheet-tough'>
                    Channel:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Channel" class="sheet-shortfield" name="attr_pokemon_Channel" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Channel_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{name2=pokemon_Fight}} {{test2=[[1]]}} {{name3=pokemon_Channel}} {{test3=[[1]]}} {{dice=[[@{pokemon_Strength}+@{pokemon_Fight}+@{pokemon_Channel}]]}} {{result=[[@{pokemon_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Channel_equation}]]}}' name='roll_pokemon_ChannelCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Athletic:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Athletic" class="sheet-shortfield" name="attr_pokemon_Athletic" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Athletic_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{name2=pokemon_Survival}} {{test2=[[1]]}} {{name3=pokemon_Athletic}} {{test3=[[1]]}} {{dice=[[@{pokemon_Dexterity}+@{pokemon_Survival}+@{pokemon_Athletic}]]}} {{result=[[@{pokemon_Dexterity_equation}+@{pokemon_Survival_equation}+@{pokemon_Athletic_equation}]]}}' name='roll_pokemon_AthleticCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Etiquette:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Etiquette" class="sheet-shortfield" name="attr_pokemon_Etiquette" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Etiquette_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{name2=pokemon_Contest}} {{test2=[[1]]}} {{name3=pokemon_Etiquette}} {{test3=[[1]]}} {{dice=[[@{pokemon_Vitality}+@{pokemon_Contest}+@{pokemon_Etiquette}]}} {{result=[[@{pokemon_Vitality_equation}+@{pokemon_Contest_equation}+@{pokemon_Etiquette_equation}]]}}' name='roll_pokemon_EtiquetteCheck'>
                </td>
            </tr>
            <tr class='sheet-9col'>
                <td class='sheet-table-header sheet-tough'>
                    Evasion:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Evasion" class="sheet-shortfield" name="attr_pokemon_Evasion" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Evasion_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{name2=pokemon_Fight}} {{test2=[[1]]}} {{name3=pokemon_Evasion}} {{test3=[[1]]}} {{dice=[[@{pokemon_Strength}+@{pokemon_Fight}+@{pokemon_Evasion}]]}} {{result=[[@{pokemon_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Evasion_equation}]]}}' name='roll_pokemon_EvasionCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Nature:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Nature" class="sheet-shortfield" name="attr_pokemon_Nature" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Nature_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{name2=pokemon_Survival}} {{test2=[[1]]}} {{name3=pokemon_Nature}} {{test3=[[1]]}} {{dice=[[@{pokemon_Dexterity}+@{pokemon_Survival}+@{pokemon_Nature}]]}} {{result=[[@{pokemon_Dexterity_equation}+@{pokemon_Survival_equation}+@{pokemon_Nature_equation}]]}}' name='roll_pokemon_NatureCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Intimidate:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Intimidate" class="sheet-shortfield" name="attr_pokemon_Intimidate" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Intimidate_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{name2=pokemon_Contest}} {{test2=[[1]]}} {{name3=pokemon_Intimidate}} {{test3=[[1]]}} {{dice=[[@{pokemon_Vitality}+@{pokemon_Contest}+@{pokemon_Intimidate}]}} {{result=[[@{pokemon_Vitality_equation}+@{pokemon_Contest_equation}+@{pokemon_Intimidate_equation}]]}}' name='roll_pokemon_IntimidateCheck'>
                </td>
            </tr>
            <tr class='sheet-9col'>
                <td class='sheet-table-header sheet-tough'>
                    Clash:
                </td>
                <td class='sheet-tough'>
                    <input title="pokemon_Clash" class="sheet-shortfield" name="attr_pokemon_Clash" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Clash_equation" value='0'/>
                </td>
                <td class='sheet-tough sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Strength}} {{test1=[[1]]}} {{name2=pokemon_Fight}} {{test2=[[1]]}} {{name3=pokemon_Clash}} {{test3=[[1]]}} {{dice=[[@{pokemon_Strength}+@{pokemon_Fight}+@{pokemon_Clash}]]}} {{result=[[@{pokemon_Strength_equation}+@{pokemon_Fight_equation}+@{pokemon_Clash_equation}]]}}' name='roll_pokemon_ClashCheck'>
                </td>
                <td class='sheet-table-header sheet-cool'>
                    Stealth:
                </td>
                <td class='sheet-cool'>
                    <input title="pokemon_Stealth" class="sheet-shortfield" name="attr_pokemon_Stealth" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Stealth_equation" value='0'/>
                </td>
                <td class='sheet-cool sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Dexterity}} {{test1=[[1]]}} {{name2=pokemon_Survival}} {{test2=[[1]]}} {{name3=pokemon_Stealth}} {{test3=[[1]]}} {{dice=[[@{pokemon_Dexterity}+@{pokemon_Survival}+@{pokemon_Stealth}]]}} {{result=[[@{pokemon_Dexterity_equation}+@{pokemon_Survival_equation}+@{pokemon_Stealth_equation}]]}}' name='roll_pokemon_StealthCheck'>
                </td>
                <td class='sheet-table-header sheet-beauty'>
                    Perform:
                </td>
                <td class='sheet-beauty'>
                    <input title="pokemon_Perform" class="sheet-shortfield" name="attr_pokemon_Perform" type="number" value='0' min='0' max='5'/>
                    <input class='sheet-dummy' type="text" name="attr_pokemon_Perform_equation" value='0'/>
                </td>
                <td class='sheet-beauty sheet-miniroll'>
                    <button type='roll' value='&{template:Pokerole-skill} {{name=@{pokemon_name}}} {{name1=pokemon_Vitality}} {{test1=[[1]]}} {{name2=pokemon_Contest}} {{test2=[[1]]}} {{name3=pokemon_Perform}} {{test3=[[1]]}} {{dice=[[@{pokemon_Vitality}+@{pokemon_Contest}+@{pokemon_Perform}]}} {{result=[[@{pokemon_Vitality_equation}+@{pokemon_Contest_equation}+@{pokemon_Perform_equation}]]}}' name='roll_pokemon_PerformCheck'>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="sheet-tab sheet-trainertab">
    <input type="radio" id="tab-4" value = "4" name="attr_tab-group">
    <label for="tab-4">Inventory</label>
    <div class="sheet-content">
        <div class='sheet-3colrow'>
            <div class='col'>
                <h4 class='sheet-minihead'>Potions</h4>
                <table class='sheet-odd-table'>
                    <tr>
                        <td>
                            Unopened
                        </td>
                        <td>
                            <input title='PotionQuantity' type='number' class='sheet-shortfield' name='attr_PotionQuantity' min='0'/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Spare Doses
                        </td>
                        <td>
                            <input title='PotionDoses' type='number' class='sheet-shortfield' name='attr_PotionDoses' min='0' max='2'/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class='col'>
                <h4 class='sheet-minihead'>Super Potions</h4>
                <table class='sheet-odd-table'>
                    <tr>
                        <td>
                            Unopened
                        </td>
                        <td>
                            <input title='SuperPotionQuantity' type='number' class='sheet-shortfield' name='attr_SuperPotionQuantity' min='0'/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Spare Doses
                        </td>
                        <td>
                            <input title='SuperPotionDoses' type='number' class='sheet-shortfield' name='attr_SuperPotionDoses' min='0' max='4'/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class='col'>
                <h4 class='sheet-minihead'>Hyper Potions</h4>
                <table class='sheet-odd-table'>
                    <tr>
                        <td>
                            Unopened
                        </td>
                        <td>
                            <input title='HyperPotionQuantity' type='number' class='sheet-shortfield' name='attr_HyperPotionQuantity' min='0'/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Spare Doses
                        </td>
                        <td>
                            <input title='HyperPotionDoses' class='sheet-shortfield' name='attr_HyperPotionDoses' min='0' max='14'/>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    <h4 class='sheet-minihead'>Other Inventory Items</h4>
    <table class='sheet-big-table' style = "width:100%;">
        <tr>
            <th style = "width:45%;">Item Name</th>
            <th style = "width:45%;">Description</th>
            <th style = "width:5%;">Amount</th>
        </tr>
    </table>
    <fieldset class='repeating_inventory'>
        <table class='sheet-big-table' style = "width:100%;">
            <tr>
                <td class='sheet-shortfield6' style = "width:45%;"><input title='repeating_inventory_X_InventoryName' type='text' class='sheet-shortfield' name='attr_InventoryName' /></td>
                <td class='sheet-shortfield7' style = "width:45%;"><input title='repeating_inventory_X_InventoryDesc' type='text' class='sheet-shortfield' name='attr_InventoryDesc' /></td>
                <td class='sheet-shortfield8' style = "width:5%;"><input title='repeating_inventory_X_InventoryQuantity' type='number' class='sheet-shortfield' name='attr_InventoryQuantity' min='0'/></td>
            </tr>
        </table>
    </fieldset>
    </div>
</div>
<div class="sheet-tab sheet-pokemontab">
    <input type="radio" id="tab-5" value = "5" name="attr_tab-group">
    <label for="tab-5">Abilities/ Moves</label>
    <div class="sheet-content">
        <h3 class='sheet-header'>Abilities</h3> 
        <fieldset class='repeating_abilities'>
            <input type="checkbox" class="sheet-arrow" name="attr_Ability_Hide"/><span></span>
            <h4 class='sheet-minihead'>Ability</h4>
            <table class='sheet-table'>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Name:</td>
                    <td colspan=9><input title='repeating_abilities_X_Ability_Name' class='sheet-shortfield' name='attr_Ability_Name' type='text'></td>
                    <td colspan=1>Roll:</td>
                    <td colspan=1><button type='roll' title='repeating_abilities_X_Ability_Display' value='&{template:Pokerole-display} {{desc=@{Ability_Name}}} {{move=@{Ability_Description}}} {{effect=@{Ability_Effect}}}' name='roll_Ability_Display' /></td>
                </tr>
                <tr class="sheet-movelist">
                    <td class='sheet-table-header'>Description:</td>
                    <td><textarea title='repeating_abilities_X_Ability_Description' class='sheet-textarea-b' name='attr_Ability_Description'></textarea></td>
                </tr>
                <tr class="sheet-movelist">
                    <td class='sheet-table-header'>Effect:</td>
                    <td><textarea title='repeating_abilities_X_Ability_Effect' class='sheet-textarea-c' name='attr_Ability_Effect'></textarea></td>
                </tr>
            </table>
        </fieldset>
        <h3 class='sheet-header'>Moves</h3> 
        <fieldset class='repeating_moves'>
            <br/>
            <input type="checkbox" class="sheet-arrow" name="attr_Move_Hide"/><span></span>
            <h4 class='sheet-minihead'>Move</h4>
            <table class='sheet-table'>
                <tr class='sheet-12equal'>
                    <td></td><td></td><td></td>
                    <td></td><td></td><td></td>
                    <td></td><td></td><td></td>
                    <td></td><td></td><td></td>
                </tr>
                <tr class='sheet-dummy'>
                    <td colspan=12></td>
                </tr>
                <tr>
                    <td colspan=1 class='sheet-table-header'>Name:</td>
                    <td colspan=9><input title='repeating_moves_X_Move_Name' class='sheet-shortfield' name='attr_Move_Name' type='text'></td>
                    <td>Roll:</td>
                    <td><button type='roll' title='repeating_moves_X_Move_Roll' value='&{template:Pokerole-move} {{name=@{pokemon_name}}} {{move=@{Move_Name}}} {{move_output=[[@{Move_Output}]]}} {{move_input=[[@{Move_Input}]]}} {{type=@{Move_Type}}} {{effect=@{Move_Effects}}} {{target=@{Move_Target}}} {{accuracy=[[?{Accuracy Penalty|0,0|-2,2|-4,4|-6,6|-8,8|-10,10}]]}} {{accuracy_0=[[@{Move_Accuracy_Total_equation}]]}} {{accuracy_2=[[@{Move_Accuracy_Total_equation_sub_2}]]}} {{accuracy_4=[[@{Move_Accuracy_Total_equation_sub_4}]]}} {{accuracy_6=[[@{Move_Accuracy_Total_equation_sub_6}]]}} {{accuracy_8=[[@{Move_Accuracy_Total_equation_sub_8}]]}} {{accuracy_10=[[@{Move_Accuracy_Total_equation_sub_10}]]}} {{damage_t=[[@{Move_Damage_T}d6]]}} {{crit=[[@{Move_Crit}]]}} {{damage_b=[[2d6]]}} {{chance=@{Move_Chance}}} {{chance_roll=[[@{Move_Chance}d6>6]]}} {{desc=@{Move_Desc}}}' name='roll_Move_Roll' /> <img src="http://www.serebii.net/pokedex-dp/type/other.png"></td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=3 class='sheet-table-header'>Move Category:</td>
                    <td colspan=3><select title='repeating_moves_X_Move_Output' class='sheet-shortfield' name='attr_Move_Output'>
                        <option value="0">Physical</option> 
                        <option value="1">Special</option>
                        <option value="2">Other</option>
                    </select></td>
                    <td colspan=3 class='sheet-table-header'>Defense Targeted:</td>
                    <td colspan=3><select title='repeating_moves_X_Move_Input' class='sheet-shortfield' name='attr_Move_Input'>
                        <option value="0">Physical</option> 
                        <option value="1">Special</option>
                    </select></td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=3 class='sheet-table-header'>Type:</td>
                    <td colspan=3><input title='repeating_moves_X_Move_Type' class='sheet-shortfield' name='attr_Move_Type' type='text'></td>
                    <td colspan=3 class='sheet-table-header'>Target(s):</td>
                    <td colspan=3><input title='repeating_moves_X_Move_Target' class='sheet-shortfield' name='attr_Move_Target' type='text'></td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=1 class='sheet-table-header'>Damage:</td>
                    <td colspan=7><select title='repeating_moves_X_Move_Damage' class='sheet-shortfield4' name='attr_Move_Damage'>
                        <option value='Strength'>Strength</option>
                        <option value='Special'>Special</option>
                    </select>+<input title='repeating_moves_X_Move_Power' class='sheet-shortfield' name='attr_Move_Power' type='number' value='0'>
                    =<input title='repeating_moves_X_Move_Damage_T' class='sheet-shortfield' name='attr_Move_Damage_T' type='number'>
                    </td>
                    <td class='sheet-table-header'>
                        High-Crit:
                    </td>
                    <td>
                        <input type="checkbox" name="attr_Move_Crit" value="1">
                    </td>
                    <td class='sheet-table-header'>
                        Shield:
                    </td>
                    <td>
                        <input type="checkbox" name="attr_Move_Shield" value="1">
                    </td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=1 class='sheet-table-header'>Effects:</td>
                    <td colspan=11><input title='repeating_moves_X_Move_Effects' class='sheet-shortfield' name='attr_Move_Effects' type='text'></td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=1 class='sheet-table-header'>Chance Dice:</td>
                    <td colspan=1><input title='repeating_moves_X_Move_Chancer' class='sheet-shortfield' name='attr_Move_Chance' type='number'></td>
                    <td colspan=3 class='sheet-table-header'>Accuracy:</td>
                    <td colspan=7><select title='repeating_moves_X_Move_Accuracy1' class='sheet-shortfield9' name='attr_Move_Accuracy1'>
                        <option value='pokemon_Battle_Strength' selected>Strength</option> 
                        <option value='pokemon_Battle_Dexterity'>Dexterity</option>
                        <option value='pokemon_Vitality'>Vitality</option>
                        <option value='pokemon_Battle_Special'>Special</option>
                        <option value='pokemon_Insight'>Insight</option>
                        <option value='pokemon_Will'>Will</option>
                    </select>
                    <input type="radio" name="attr_dummy_accuracy_w" class="sheet-dummy" value="0" checked/>
                    <input type="radio" name="attr_dummy_accuracy_w" class="sheet-dummy sheet-dummy_accuracy_w" value="1"/>
                    <span class='sheet-will'>
                        +
                    </span>
                    <select title='repeating_moves_X_Move_Accuracy2' class='sheet-shortfield9 sheet-will' name='attr_Move_Accuracy2'>
                        <option value='pokemon_Fight' selected>Fight</option> 
                        <option value='pokemon_Survival'>Survival</option>
                        <option value='pokemon_Contest'>Contest</option>
                    </select>
                    <span class='sheet-will'>
                        +
                    </span>
                    <input type="radio" name="attr_dummy_accuracy_s" class="sheet-dummy sheet-dummy_accuracy_f" value="0" checked/>
                    <input type="radio" name="attr_dummy_accuracy_s" class="sheet-dummy sheet-dummy_accuracy_s" value="1"/>
                    <input type="radio" name="attr_dummy_accuracy_s" class="sheet-dummy sheet-dummy_accuracy_c" value="2"/>
                    <select title='repeating_moves_X_Move_Accuracy3f' class='sheet-shortfield9 sheet-fight sheet-will' name='attr_Move_Accuracy3f'>
                        <option value='pokemon_Brawl' selected>Brawl</option> 
                        <option value='pokemon_Channel'>Channel</option>
                        <option value='pokemon_Evasion'>Evasion</option>
                        <option value='pokemon_Clash'>Clash</option>
                    </select>
                    <select title='repeating_moves_X_Move_Accuracy3s' class='sheet-shortfield9 sheet-survival sheet-will' name='attr_Move_Accuracy3s'>
                        <option value='pokemon_Alert' selected>Alert</option> 
                        <option value='pokemon_Athletic'>Athletic</option>
                        <option value='pokemon_Nature'>Nature</option>
                        <option value='pokemon_Stealth'>Stealth</option>
                    </select>
                    <select title='repeating_moves_X_Move_Accuracy3c' class='sheet-shortfield9 sheet-contest sheet-will' name='attr_Move_Accuracy3c'>
                        <option value='pokemon_Allure' selected>Allure</option> 
                        <option value='pokemon_Etiquette'>Etiquette</option>
                        <option value='pokemon_Intimidate'>Intimidate</option>
                        <option value='pokemon_Perform'>Perform</option>
                    </select>
                    <input class='sheet-dummy' name='attr_Move_Accuracy3' type='text'>
                    +<input title='repeating_moves_X_Move_Accuracy_Mod' class='sheet-shortfield' name='attr_Move_Accuracy_Mod' type='number' value=0>
                    =<input title='repeating_moves_X_Move_Accuracy_Total' class='sheet-shortfield' name='attr_Move_Accuracy_Total' type='number' value=0>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation_sub_2" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation_sub_4" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation_sub_6" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation_sub_8" value='0'/>
                    <input class='sheet-dummy' type="text" name="attr_Move_Accuracy_Total_equation_sub_10" value='0'/>
                    </td>
                </tr>
                <tr class="sheet-movelist">
                    <td colspan=1 class='sheet-table-header'>Description:</td>
                    <td style='vertical-align:middle' colspan=11><textarea title='Move_Desc' class='sheet-textarea-d' name='attr_Move_Desc'></textarea></td>
                </tr>
            </table>
        </fieldset>
    </div>
</div>

</div>
</div>
<rolltemplate class="sheet-rolltemplate-Pokerole-move">
    <table>
        <tr><th colspan="4">{{name}} uses {{move}}!</th></tr>
        <tr>{{#rollTotal() move_output 2}}
            <td>Category:</td><td>Status</td>
        {{/rollTotal() move_output 2}}
        {{#^rollTotal() move_output 2}}
            {{#rollTotal() move_output move_input}}
            <td colspan="2">Category:</td>
            <td colspan="2">
                {{#rollTotal() move_output 0}}
                    Physical
                {{/rollTotal() move_output 0}}
                {{#rollTotal() move_output 1}}
                    Special
                {{/rollTotal() move_output 1}}
            </td>
            {{/rollTotal() move_output move_input}}
            {{#^rollTotal() move_output move_input}}
            <td>Category:</td>
            <td>
                {{#rollTotal() move_output 0}}
                    Physical
                {{/rollTotal() move_output 0}}
                {{#rollTotal() move_output 1}}
                    Special
                {{/rollTotal() move_output 1}}
            </td>
            <td>Defense Targeted:</td>
            <td>
                {{#rollTotal() move_input 0}}
                    Physical
                {{/rollTotal() move_input 0}}
                {{#rollTotal() move_input 1}}
                    Special
                {{/rollTotal() move_input 1}}
            </td>
            {{/^rollTotal() move_output move_input}}
        {{/^rollTotal() move_output 2}}</tr>
        <tr><td colspan="2">Type:</td><td colspan="2">{{type}}</td></tr>
        <tr><td colspan="2">Targets:</td><td colspan="2">{{target}}</td></tr>
        <tr><td colspan="2">Crits On:</td>{{#rollTotal() crit 1}}
            <td colspan="2">4 Successes</td>
        {{/rollTotal() crit 1}}{{#^rollTotal() crit 1}}
            <td colspan="2">5 Successes</td>
        {{/^rollTotal() crit 1}}</tr>
        {{#rollTotal() accuracy 0}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_0 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_0}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_0 4}}
        		{{#^rollGreater() accuracy_0 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_0}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_0 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_0 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_0}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_0 5}}
        		{{#^rollGreater() accuracy_0 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_0}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_0 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 0}}
        {{#rollTotal() accuracy 2}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_2 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_2}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_2 4}}
        		{{#^rollGreater() accuracy_2 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_2}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_2 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_2 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_2}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_2 5}}
        		{{#^rollGreater() accuracy_2 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_2}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_2 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 2}}
        {{#rollTotal() accuracy 4}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_4 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_4}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_4 4}}
        		{{#^rollGreater() accuracy_4 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_4}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_4 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_4 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_4}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_4 5}}
        		{{#^rollGreater() accuracy_4 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_4}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_4 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 4}}
        {{#rollTotal() accuracy 6}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_6 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_6}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_6 4}}
        		{{#^rollGreater() accuracy_6 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_6}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_6 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_6 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_6}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_6 5}}
        		{{#^rollGreater() accuracy_6 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_6}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_6 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 6}}
        {{#rollTotal() accuracy 8}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_8 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_8}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_8 4}}
        		{{#^rollGreater() accuracy_8 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_8}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_8 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_8 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_8}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_8 5}}
        		{{#^rollGreater() accuracy_8 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_8}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_8 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 8}}
        {{#rollTotal() accuracy 10}}
        	{{#rollTotal() crit 1}}
        		{{#rollGreater() accuracy_10 4}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_10}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_10 4}}
        		{{#^rollGreater() accuracy_10 4}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_10}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_10 4}}
        	{{/rollTotal() crit 1}}
        	{{#rollTotal() crit 0}}
        		{{#rollGreater() accuracy_10 5}}
            		<tr>
                		<td class="sheet-hit" colspan="4">Critical Hit!</td>
            		</tr>
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_10}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}+{{damage_b}}</td>
            		</tr>
        		{{/rollGreater() accuracy_10 5}}
        		{{#^rollGreater() accuracy_10 5}}
        			<tr>
            			<td colspan="2">Accuracy Roll:</td><td colspan="2">{{accuracy_10}}</td>
        			</tr>
           			<tr>
                		<td colspan="2">Damage Roll:</td><td colspan="2">{{damage_t}}</td>
            		</tr>
        		{{/^rollGreater() accuracy_10 5}}
        	{{/rollTotal() crit 0}}
        {{/rollTotal() accuracy 10}}
        {{#chance}}
            <tr><td>Chance Dice:</td><td>{{chance}}</td><td>Chance Roll:</td><td>{{chance_roll}}</td></tr>
        {{/chance}}
        {{#effect}}<tr>
            <td colspan="2">Effects:</td><td colspan="2">{{effect}}</td>
        </tr>{{/effect}}
        {{#desc}}<tr>
            <td colspan="2">Description:</td><td colspan="2">{{desc}}</td>
        </tr>{{/desc}}
    </table>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-Pokerole-display">
    <table>
        <tr><th colspan="2">Ability: {{name}}</th></tr>
        <tr><td>Description:</td><td>{{desc}}</td></tr>
        <tr><td>Effect:</td><td>{{effect}}</td></tr>
    </table>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-Pokerole-skill">
    <table>
        {{#rollTotal() test1 0}}
            {{#rollTotal() test2 0}}
                {{#rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls Nothing!</th></tr>
                {{/rollTotal() test3 0}}
                {{#^rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name3}}!</th></tr>
                {{/^rollTotal() test3 0}}
            {{/rollTotal() test2 0}}
            {{#^rollTotal() test2 0}}
                {{#rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name2}}!</th></tr>
                {{/rollTotal() test3 0}}
                {{#^rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name2}}+{{name3}}!</th></tr>
                {{/^rollTotal() test3 0}}
            {{/^rollTotal() test2 0}}
        {{/rollTotal() test1 0}}
        {{#^rollTotal() test1 0}}
            {{#rollTotal() test2 0}}
                {{#rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name1}}!</th></tr>
                {{/rollTotal() test3 0}}
                {{#^rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name1}}+{{name3}}!</th></tr>
                {{/^rollTotal() test3 0}}
            {{/rollTotal() test2 0}}
            {{#^rollTotal() test2 0}}
                {{#rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name1}}+{{name2}}!</th></tr>
                {{/rollTotal() test3 0}}
                {{#^rollTotal() test3 0}}
                    <tr><th colspan="2">{{name}} rolls {{name1}}+{{name2}}+{{name3}}!</th></tr>
                {{/^rollTotal() test3 0}}
            {{/^rollTotal() test2 0}}
        {{/^rollTotal() test1 0}}
        <tr><td>Dice Rolled:</td><td>{{dice}}</td></tr>
        <tr><td>Result:</td><td>{{result}}</td></tr>
    </table>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-Test">
    <table>
        <tr><td>This is</td><td>a test.</td></tr>
        {{#rollTotal() test other}}
        <tr><td colspan="2">{{name}} uses {{move}}</td></tr>
        {{/rollTotal() test other}}
    </table>
</rolltemplate>

<script type="text/worker">
//On calls
var equationArray = ["Battle_Strength","Battle_Dexterity","Def","SpDef","Battle_Evasion","pokemon_Battle_Strength","pokemon_Battle_Dexterity","pokemon_Battle_Special","pokemon_Def","pokemon_SpDef","pokemon_Battle_Evasion","Strength","Dexterity","Vitality","Insight","Tough","Cool","Beauty","Intelligence","Fight","Survival","Contest","Knowledge","Brawl","Alert","Empathy","Crafts","Throw","Athletic","Etiquette","Lore","Evasion","Nature","Intimidate","Medicine","Weapons","Stealth","Perform","Science","pokemon_Strength","pokemon_Dexterity","pokemon_Vitality","pokemon_Insight","pokemon_Special","pokemon_Tough","pokemon_Cool","pokemon_Beauty","pokemon_Smart","pokemon_Cute","pokemon_Fight","pokemon_Survival","pokemon_Contest","pokemon_Brawl","pokemon_Alert","pokemon_Allure","pokemon_Channel","pokemon_Athletic","pokemon_Etiquette","pokemon_Evasion","pokemon_Nature","pokemon_Intimidate","pokemon_Clash","pokemon_Stealth","pokemon_Perform","Generic_Trainer_RollT","Generic_Pokemon_RollT"];
var backIndex = {};
for (var i=0; i < equationArray.length; i++) {
    backIndex[equationArray[i].toLowerCase()]=equationArray[i];
}

on(equationArray.map(function (x) {return 'change:'+x.toLowerCase();}).join(' '), function(eventInfo){
    equationify(backIndex[eventInfo.sourceAttribute]);
});

on('change:repeating_moves:move_accuracy_total', function(eventInfo) {
    equationify(eventInfo.sourceAttribute.replace('move_accuracy_total','Move_Accuracy_Total'));
    equationifySub(eventInfo.sourceAttribute.replace('move_accuracy_total','Move_Accuracy_Total'), [2,4,6,8,10]);
});

on("change:repeating_moves:move_accuracy1", function(eventInfo) {
    setAttrs({ 
        repeating_moves_dummy_accuracy_w: ((eventInfo.newValue == 'Will') ? 1 : 0) 
    });
});

on("change:generic_trainer_roll1 change:generic_trainer_roll2 change:generic_trainer_roll3 change:generic_trainer_rollb", function(eventInfo) {
    genericTrainerUpdate();
});

on("change:strength change:dexterity change:vitality change:insight change:tough change:cool change:beauty change:intelligence change:will_max change:fight change:survival change:contest change:knowledge change:brawl change:throw change:evasion change:weapons change:alert change:athletic change:nature change:stealth change:empathy change:etiquette change:intimidate change:perform change:crafts change:lore change:medicine change:science", function (eventInfo){
    genericTrainerUpdate();            
});

on("change:generic_pokemon_roll1 change:generic_pokemon_roll2 change:generic_pokemon_roll3 change:generic_pokemon_rollb", function(eventInfo) {
    genericPokemonUpdate();
});

on("change:pokemon_strength change:pokemon_dexterity change:pokemon_vitality change:pokemon_special change:pokemon_insight change:pokemon_tough change:pokemon_cool change:pokemon_beauty change:pokemon_cute change:pokemon_smart change:pokemon_will_max change:pokemon_fight change:pokemon_survival change:pokemon_contest change:pokemon_brawl change:pokemon_channel change:pokemon_evasion change:pokemon_clash change:pokemon_alert change:pokemon_athletic change:pokemon_nature change:pokemon_stealth change:pokemon_allure change:pokemon_etiquette change:pokemon_intimidate change:pokemon_perform", function (eventInfo){
    genericPokemonUpdate();            
});

on('change:repeating_moves change:_reporder_repeating_moves remove:repeating_moves', function(eventInfo) {
    miniupdate('moves');   
});

on('change:repeating_abilities change:_reporder_repeating_abilities remove:repeating_abilities', function(eventInfo) {
    miniupdate('abilities');   
});

on("change:repeating_moves:move_accuracy1", function(eventInfo) {
    setAttrs({ 
        repeating_moves_dummy_accuracy_w: ((eventInfo.newValue == 'Will') ? 1 : 0) 
    });
});

on("change:repeating_moves:move_accuracy2", function(eventInfo) {
    var x; var k;
    if (eventInfo.newValue == 'Fight'){
        x = 0;
        k = 'repeating_moves_Move_Accuracy3f';
    } else if (eventInfo.newValue == 'Survival'){
        x = 1;
        k = 'repeating_moves_Move_Accuracy3s';
    } else {
        x = 2;
        k = 'repeating_moves_Move_Accuracy3c';
    }
    getAttrs([k], function(v) {
        setAttrs({ 
            repeating_moves_dummy_accuracy_s: x,
            repeating_moves_Move_Accuracy3: v[k]
        });
   });
});

on("change:repeating_moves:move_accuracy3f change:repeating_moves:move_accuracy3s change:repeating_moves:move_accuracy3c", function(eventInfo) {
    setAttrs({ 
        repeating_moves_Move_Accuracy3: eventInfo.newValue,
    });
});

on("change:repeating_moves:move_damage change:repeating_moves:move_power", function(eventInfo) {
    getAttrs(['repeating_moves_Move_Damage','repeating_moves_Move_Power', 'pokemon_Battle_Strength', 'pokemon_Battle_Special'], function(v) {
        setAttrs({ 
            repeating_moves_Move_Damage_T: parseInt(v['pokemon_'+v.repeating_moves_Move_Damage], 10)+parseInt(v.repeating_moves_Move_Power, 10)
        });
   });
});

on('change:pokemon_battle_strength change:pokemon_battle_special', function(eventInfo) {
    TAS.repeating('moves')
    .attrs('pokemon_Battle_Strength','pokemon_Battle_Special')
    .fields('Move_Damage','Move_Power','Move_Damage_T')
    .each(function(row,attrSet,id,rowSet){
        row.I.Move_Damage_T=attrSet.I['pokemon_'+row.Move_Damage]+row.I.Move_Power;
    })
    .execute();
});

on("change:repeating_moves:move_accuracy1 change:repeating_moves:move_accuracy2 change:repeating_moves:move_accuracy3 change:repeating_moves:move_accuracy_mod", function(eventInfo) {
    getAttrs(['repeating_moves_Move_Accuracy1', 'repeating_moves_Move_Accuracy2', 'repeating_moves_Move_Accuracy3', 'repeating_moves_Move_Accuracy_Mod',
              'pokemon_Accuracy',
              'pokemon_Battle_Strength', 'pokemon_Battle_Dexterity', 'pokemon_Vitality', 'pokemon_Battle_Special', 'pokemon_Insight', 'pokemon_Will_max', 
              'pokemon_Fight', 'pokemon_Survival', 'pokemon_Contest', 
              'pokemon_Brawl', 'pokemon_Channel', 'pokemon_Evasion', 'pokemon_Clash', 
              'pokemon_Alert', 'pokemon_Athletic', 'pokemon_Nature', 'pokemon_Stealth', 
              'pokemon_Allure', 'pokemon_Etiquette', 'pokemon_Intimidate', 'pokemon_Perform'], function(v) {
        o = {repeating_moves_Move_Accuracy_Total:parseInt(v[v.repeating_moves_Move_Accuracy1],10)+ parseInt(v.repeating_moves_Move_Accuracy_Mod,10) + parseInt(v.pokemon_Accuracy,10)};
        if (v.repeating_moves_Move_Accuracy1!='pokemon_Will'){
            o.repeating_moves_Move_Accuracy_Total += parseInt(v[v.repeating_moves_Move_Accuracy2],10)+parseInt(v[v.repeating_moves_Move_Accuracy3],10);
        }
        setAttrs(o);
   });
});

on('change:pokemon_strength change:pokemon_special', function(eventInfo) {
    TAS.repeating('moves')
    .attrs('pokemon_Accuracy',
           'pokemon_Battle_Strength', 'pokemon_Battle_Dexterity', 'pokemon_Vitality', 'pokemon_Battle_Special', 'pokemon_Insight', 'pokemon_Will_max', 
           'pokemon_Fight', 'pokemon_Survival', 'pokemon_Contest', 
           'pokemon_Brawl', 'pokemon_Channel', 'pokemon_Evasion', 'pokemon_Clash', 
           'pokemon_Alert', 'pokemon_Athletic', 'pokemon_Nature', 'pokemon_Stealth', 
           'pokemon_Allure', 'pokemon_Etiquette', 'pokemon_Intimidate', 'pokemon_Perform')
    .fields('Move_Accuracy1','Move_Accuracy2','Move_Accuracy3','Move_Accuracy_Mod','Move_Accuracy_Total')
    .each(function(row,attrSet,id,rowSet){
        x = attrSet.I[row.Move_Accuracy1]+row.I.Move_Accuracy_Mod + attrSet.I.pokemon_Accuracy;
        if (row.Move_Accuracy1 != 'pokemon_Will'){
            x += attrSet.I[row.Move_Accuracy2] + attrSet.I[row.Move_Accuracy3];
        }
        row.Move_Accuracy_Total = x;
    })
    .execute();
});

on("change:repeating_moves:move_output", function(eventInfo) {
    if (eventInfo.newValue != '2'){
        setAttrs({ 
            repeating_moves_Move_Input: eventInfo.newValue
        });
    }
});

on("change:pokemon_dexterity change:pokemon_survival change:pokemon_alert change:pokemon_fight change:pokemon_evasion change:evasion_bonus", function(eventInfo) {
    getAttrs(['pokemon_Dexterity','pokemon_Survival','pokemon_Alert','pokemon_Fight','pokemon_Evasion','Evasion_Bonus'], function(v) {
        setAttrs({ 
            InitD: v.pokemon_Dexterity,
            EvaD: v.pokemon_Dexterity,
            InitS: v.pokemon_Survival,
            EvaF: v.pokemon_Fight,
            InitA: v.pokemon_Alert,
            EvaE: v.pokemon_Evasion,
            pokemon_Initiative: parseInt(v.pokemon_Dexterity,10)+parseInt(v.pokemon_Survival,10)+parseInt(v.pokemon_Alert,10),
            pokemon_Evasion_Battle: parseInt(v.pokemon_Dexterity,10)+parseInt(v.pokemon_Fight,10)+parseInt(v.pokemon_Evasion,10)+parseInt(v.Evasion_Bonus,10)
        });
    });
});

on("change:pokemon_vitality change:def_bonus change:spdef_bonus", function(eventInfo) {
    getAttrs(['pokemon_Vitality','Def_Bonus','SpDef_Bonus'], function(v) {
        setAttrs({ 
            DefV: v.pokemon_Vitality,
            SpDefV: v.pokemon_Vitality,
            Def: Math.min(parseInt(v.pokemon_Vitality,10)+parseInt(v.Def_Bonus,10),10),
            SpDef: Math.min(parseInt(v.pokemon_Vitality,10)+parseInt(v.SpDef_Bonus,10),10)
        });
    });
});

var genericTrainerUpdate = function () {
    getAttrs(['Generic_Trainer_Roll1','Generic_Trainer_Test1','Generic_Trainer_Roll2','Generic_Trainer_Test2','Generic_Trainer_Roll3','Generic_Trainer_Test3','Generic_Trainer_RollB'], function(v) {
        getnewlist = [];
        totalres = 0;
        tests = [];
        if (v.Generic_Trainer_Roll1 == "Will") { tests.push(1); getnewlist.push("Will_max"); }
        else if (v.Generic_Trainer_Roll1 == "0") { tests.push(0); }
        else { tests.push(1); getnewlist.push(v.Generic_Trainer_Roll1); }
        if (v.Generic_Trainer_Roll2 == "0") { tests.push(0); }
        else { tests.push(1); getnewlist.push(v.Generic_Trainer_Roll2); }
        if (v.Generic_Trainer_Roll3 == "0"){ tests.push(0); }
        else { tests.push(1); getnewlist.push(v.Generic_Trainer_Roll3); }
        totalres += parseInt(v.Generic_Trainer_RollB , 10);
        getAttrs(getnewlist, function(w){
            for (var i=0; i<getnewlist.length;i++){
                totalres += parseInt(w[getnewlist[i]], 10);
            }
            setAttrs({ 
                Generic_Trainer_RollT: totalres,
                Generic_Trainer_Test1: tests[0],
                Generic_Trainer_Test2: tests[1],
                Generic_Trainer_Test3: tests[2]
            });
        });
   });
};

var genericPokemonUpdate = function () {
    getAttrs(['Generic_Pokemon_Roll1','Generic_Pokemon_Test1','Generic_Pokemon_Roll2','Generic_Pokemon_Test2','Generic_Pokemon_Roll3','Generic_Pokemon_Test3','Generic_Pokemon_RollB'], function(v) {
        getnewlist = [];
        totalres = 0;
        if (v.Generic_Pokemon_Roll1 == "Will") { tests.push(1); getnewlist.push("pokemon_Will_max");}
        else if (v.Generic_Pokemon_Roll1 == "0") { tests.push(0); }
        else { tests.push(1); getnewlist.push("pokemon_"+v.Generic_Pokemon_Roll1); }
        if (v.Generic_Pokemon_Roll2 == "0") { tests.push(0); }
        else { tests.push(1); getnewlist.push("pokemon_"+v.Generic_Pokemon_Roll2); }
        if (v.Generic_Pokemon_Roll3 == "0") { tests.push(0); }
        else { tests.push(1); getnewlist.push("pokemon_"+v.Generic_Pokemon_Roll3); }
        totalres += parseInt(v.Generic_Pokemon_RollB , 10);
        getAttrs(getnewlist, function(w){
            for (var i=0; i<getnewlist.length;i++){
                totalres += parseInt(w[getnewlist[i]], 10);
            }
            setAttrs({ 
                Generic_Pokemon_RollT: totalres,
                Generic_Pokemon_Test1: tests[0],
                Generic_Pokemon_Test2: tests[1],
                Generic_Pokemon_Test3: tests[2]
            });
        });
   });
};

var dicestring = function (n) {
    var valid = n;
    if (typeof valid === 'string'){
        valid = parseInt(valid,10);
    }
    if (valid <= 0){
        return "0";
    } else {
        return "{"+"{2, floor(3**([[1d6]]/2-1)-1)}kl1, ".repeat(valid).slice(0,-2)+"}";
    }
};

var equationify = function(s) {
  getAttrs([s],function (v){
    o = {};
    o[s+'_equation'] = dicestring(v[s]);
    setAttrs(o);
  });
};

var equationifySub = function(s, nlist) {
  getAttrs([s],function (v){
    o = {};
    for (var i=0; i < nlist.length; i++){
        o[s+'_equation_sub_'+str(nlist[i])] = dicestring(v[s]-nlist[i]);
    }
    setAttrs(o);
  });
};

var getSectionIDsOrdered = function (sectionName, callback) {
  'use strict';
  getAttrs([`_reporder_${sectionName}`], function (v) {
    getSectionIDs(sectionName, function (idArray) {
      let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
        ids = [...new Set(reporderArray.filter(function (x) {return idArray.includes(x);}).concat(idArray))];
      callback(ids);
    });
  });
};

var miniupdate = function(section) {
  var attrarray;
  if (section=='moves'){
      attrarray = ['Move_Name','Move_Output','Move_Input','Move_Type','Move_Target','Move_Damage_T','Move_Shield', 'Move_Crit','Move_Effects','Move_Chance','Move_Accuracy_Total','Move_Accuracy_Total_equation', 'Move_Accuracy_Total_equation_sub_2',
      'Move_Accuracy_Total_equation_sub_4','Move_Accuracy_Total_equation_sub_6','Move_Accuracy_Total_equation_sub_8','Move_Accuracy_Total_equation_sub_10',
      'Move_Desc'];
  } else if (section == 'abilities'){
      attrarray = ['Ability_Name', 'Ability_Description', 'Ability_Effect'];
  }
  getSectionIDsOrdered("repeating_"+section, function(idarray) {
    var attributes = idarray.map(function(i) {
        return attrarray.map(function(j) {
            return 'repeating_'+section+'_'+i+'_'+j;
        });
    });
    attributes = [].concat.apply([], attributes);
    var results = [];
    getAttrs(attributes, function(values) {
      getSectionIDsOrdered("repeating_mini"+section, function(midarray) {
        for (var i=0; i < idarray.length; i++) {
          var rowId = "";
          if (i < midarray.length) {
            rowId = midarray[i];
          } else {
            rowId = generateRowID();
          }
          var rowattrs = {};
          for (var j=0; j < attrarray.length; j++){
            rowattrs['repeating_mini'+section+'_'+rowId+'_mini'+attrarray[j]] = (values['repeating_'+section+'_'+idarray[i]+'_'+attrarray[j]]||"");
          }
          setAttrs(rowattrs, {silent: true});
        }
        for (var i=idarray.length; i < midarray.length; i++) {
          removeRepeatingRow("repeating_mini"+section+'_'+midarray[i]);
        }
      });
    });
   });
};

/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.5',
        lastUpdate = 1504710542,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
        queuedUpdates = {}, //< Used for delaying saves till the last moment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

    dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
    },


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            /* eslint-disable no-console */
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            ); 
            /* eslint-enable no-console */
        };
        return function(){
            if('TAS'===key || config.logging[key]){
                /* eslint-disable no-console */
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
                /* eslint-enable no-console */
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },
    
    isDebugMode = function(){
        return config.debugMode;
    },

    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            } 
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }
        
        callstack = getCallstack();
        callstack.shift();
        
        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "var start,end;"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "start=_.now();"+
                    "cb.apply(ctx||{},arguments);"+
                    "end=_.now();"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)')+' :: '+(end-start)+'ms elapsed');"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

    namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
    },

    addId = function(obj,value){
        Object.defineProperty(obj,'id',{
            value: value,
            writable: false,
            enumerable: false
        });
    },

    addProp = function(obj,prop,value,fullname){
        (function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
                full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
            Object.defineProperty(obj, pname, {
                enumerable: true,
                set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
                },
                get: function(){
                    return pvalue;
                }
            });
            
            // string value
            Object.defineProperty(obj.S, pname, {
                enumerable: true,
                set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return pvalue.toString();
                }
            });

            // int value
            Object.defineProperty(obj.I, pname, {
                enumerable: true,
                set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return parseInt(pvalue,10) || 0;
                }
            });

            // float value
            Object.defineProperty(obj.F, pname, {
                enumerable: true,
                set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return parseFloat(pvalue) || 0;
                }
            });
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

        }());
    },
    
    repeating = function( section ) {
        return (function(s){
            var sectionName = s,
                attrNames = [],
                fieldNames = [],
                operations = [],
                after = [],
            
            repAttrs = function TAS_Repeating_Attrs(){
                attrNames = namesFromArgs(arguments,attrNames);
                return this;
            },
            repFields = function TAS_Repeating_Fields(){
                fieldNames = namesFromArgs(arguments,fieldNames);
                return this;
            },
            repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
                operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repMap = function TAS_Repeating_Map(func, final, context) {
                operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repEach = function TAS_Repeating_Each(func, final, context) {
                operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
                operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
                after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repExecute = function TAS_Repeating_Execute(callback,context){
                var rowSet = {},
                    attrSet = {},
                    fieldIds = [],
                    fullFieldNames = [];

                repAfter(callback,context);

                // call each operation per row.
                // call each operation's final
                getSectionIDs("repeating_"+sectionName,function(ids){
                    fieldIds = ids;
                    fullFieldNames = _.reduce(fieldIds,function(memo,id){
                        return memo.concat(_.map(fieldNames,function(name){
                            return 'repeating_'+sectionName+'_'+id+'_'+name;  
                        }));
                    },[]);
                    getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
                        _.each(attrNames,function(aname){
                            if(values.hasOwnProperty(aname)){
                                addProp(attrSet,aname,values[aname]);
                            }
                        });

                        rowSet = _.reduce(fieldIds,function(memo,id){
                            var r={};
                            addId(r,id);
                            _.each(fieldNames,function(name){
                                var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
                                addProp(r,name,values[fn],fn);
                            });

                            memo[id]=r;

                            return memo;
                        },{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
                    });
                });
            };
                
            return {
                attrs: repAttrs,
                attr: repAttrs,

                column: repFields,
                columns: repFields,
                field: repFields,
                fields: repFields,

                reduce: repReduce,
                inject: repReduce,
                foldl: repReduce,

                map: repMap,
                collect: repMap,

                each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

                after: repAfter,
                last: repAfter,
                done: repAfter,

                execute: repExecute,
                go: repExecute,
                run: repExecute
            };
        }(section));
    },


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

    /* eslint-disable no-console */
    console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v'+version+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: '+(new Date(lastUpdate*1000))+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    /* eslint-enable no-console */


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
        repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        isDebugMode: isDebugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());

/* ---- END: TheAaronSheet.js ---- */
</script>
